<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Diagnostic - Page Blanche</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .diagnostic-box {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .success { border-left: 4px solid #4CAF50; }
        .error { border-left: 4px solid #f44336; }
        .warning { border-left: 4px solid #ff9800; }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .pass { background-color: #e8f5e8; color: #2e7d32; }
        .fail { background-color: #ffebee; color: #c62828; }
        button {
            background: #2196F3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #1976D2; }
    </style>
</head>
<body>
    <h1>üîß Diagnostic de Page Blanche</h1>
    
    <div class="diagnostic-box success">
        <h2>‚úÖ Test de Base R√©ussi</h2>
        <p>Cette page de diagnostic se charge correctement, ce qui indique que :</p>
        <ul>
            <li>Le serveur HTTP fonctionne</li>
            <li>Les fichiers HTML sont accessibles</li>
            <li>Le navigateur peut interpr√©ter le HTML/CSS</li>
        </ul>
    </div>

    <div class="diagnostic-box">
        <h2>üîç Tests Automatiques</h2>
        <div id="test-results"></div>
        <button onclick="runDiagnostics()">Lancer les tests</button>
        <button onclick="testMainSite()">Tester le site principal</button>
    </div>

    <div class="diagnostic-box">
        <h2>üìä Informations Syst√®me</h2>
        <div id="system-info"></div>
    </div>

    <script>
        // Afficher les informations syst√®me
        document.getElementById('system-info').innerHTML = `
            <p><strong>Navigateur :</strong> ${navigator.userAgent}</p>
            <p><strong>URL actuelle :</strong> ${window.location.href}</p>
            <p><strong>Protocole :</strong> ${window.location.protocol}</p>
            <p><strong>H√¥te :</strong> ${window.location.host}</p>
            <p><strong>JavaScript :</strong> ‚úÖ Activ√©</p>
            <p><strong>LocalStorage :</strong> ${typeof(Storage) !== "undefined" ? '‚úÖ Disponible' : '‚ùå Non disponible'}</p>
        `;

        function addTestResult(test, status, message) {
            const resultsDiv = document.getElementById('test-results');
            const testDiv = document.createElement('div');
            testDiv.className = `test-result ${status}`;
            testDiv.innerHTML = `<strong>${test}:</strong> ${message}`;
            resultsDiv.appendChild(testDiv);
        }

        function runDiagnostics() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<p>üîÑ Tests en cours...</p>';
            
            setTimeout(() => {
                resultsDiv.innerHTML = '';
                
                // Test 1: CSS Loading
                try {
                    const styles = window.getComputedStyle(document.body);
                    if (styles.fontFamily) {
                        addTestResult('CSS', 'pass', 'Styles CSS charg√©s correctement');
                    } else {
                        addTestResult('CSS', 'fail', 'Probl√®me de chargement CSS');
                    }
                } catch (e) {
                    addTestResult('CSS', 'fail', 'Erreur CSS: ' + e.message);
                }

                // Test 2: JavaScript
                try {
                    const testVar = 'test';
                    addTestResult('JavaScript', 'pass', 'JavaScript fonctionne correctement');
                } catch (e) {
                    addTestResult('JavaScript', 'fail', 'Erreur JavaScript: ' + e.message);
                }

                // Test 3: Console Errors
                const originalError = console.error;
                let errorCount = 0;
                console.error = function(...args) {
                    errorCount++;
                    originalError.apply(console, args);
                };
                
                setTimeout(() => {
                    if (errorCount === 0) {
                        addTestResult('Console', 'pass', 'Aucune erreur console d√©tect√©e');
                    } else {
                        addTestResult('Console', 'fail', `${errorCount} erreur(s) console d√©tect√©e(s)`);
                    }
                    console.error = originalError;
                }, 100);

                // Test 4: Network
                fetch(window.location.href)
                    .then(response => {
                        if (response.ok) {
                            addTestResult('R√©seau', 'pass', `Serveur r√©pond correctement (${response.status})`);
                        } else {
                            addTestResult('R√©seau', 'fail', `Erreur serveur: ${response.status}`);
                        }
                    })
                    .catch(e => {
                        addTestResult('R√©seau', 'fail', 'Erreur r√©seau: ' + e.message);
                    });

            }, 500);
        }

        function testMainSite() {
            // Tester l'acc√®s au site principal
            fetch('../index.html')
                .then(response => {
                    if (response.ok) {
                        return response.text();
                    }
                    throw new Error(`HTTP ${response.status}`);
                })
                .then(html => {
                    if (html.includes('<title>')) {
                        addTestResult('Site Principal', 'pass', 'index.html accessible et contient du contenu');
                        // Ouvrir le site principal
                        window.open('../index.html', '_blank');
                    } else {
                        addTestResult('Site Principal', 'fail', 'index.html vide ou corrompu');
                    }
                })
                .catch(e => {
                    addTestResult('Site Principal', 'fail', 'Impossible d\'acc√©der √† index.html: ' + e.message);
                });
        }

        // Lancer les tests automatiquement
        window.onload = function() {
            setTimeout(runDiagnostics, 1000);
        };
    </script>
</body>
</html>